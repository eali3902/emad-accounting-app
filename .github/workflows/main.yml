name: Build Android App

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯
      uses: actions/checkout@v3
    
    - name: ðŸ“± Ø¥Ù†Ø´Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Android
      run: |
        echo "ðŸš€ Ø¨Ø¯Ø¡ Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Android..."
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ Ù„Ù„Ø¨Ù†Ø§Ø¡
        mkdir -p dist
        
        # Ù†Ø³Ø® Ù…Ù„Ù HTML Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        cp index.html dist/
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù config.xml Ù„Ù€ WebView
        cat > dist/config.xml << 'XML'
<?xml version="1.0" encoding="utf-8"?>
<widget xmlns="http://www.w3.org/ns/widgets" 
        id="com.emad.accounting" 
        version="1.0.0">
    <name>Ø¹Ù…Ø§Ø¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ</name>
    <description>Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨Ø© Ù…ØªÙƒØ§Ù…Ù„</description>
    <author href="https://emad.com">Ø¹Ù…Ø§Ø¯ Ø¹Ù„ÙŠ</author>
    
    <content src="index.html" />
    
    <preference name="android-minSdkVersion" value="19" />
    <preference name="android-targetSdkVersion" value="33" />
    <preference name="Orientation" value="portrait" />
    
    <access origin="*" />
    <allow-navigation href="*" />
    
    <platform name="android">
        <icon src="icon.png" />
        <splash src="splash.png" />
    </platform>
</widget>
XML
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù README
        cat > dist/README.txt << 'TXT'
ðŸŽ‰ ØªÙ… Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù…Ø§Ø¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ Ø¨Ù†Ø¬Ø§Ø­!

Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯:
1. Ø­Ù…Ù„ Ù…Ù„Ù emad-app.zip
2. ÙÙƒ Ø§Ù„Ø¶ØºØ·
3. Ø§Ø³ØªØ®Ø¯Ù… "WebView App Creator" Ù…Ù† Ù…ØªØ¬Ø± Play
4. Ø§ÙØªØ­ index.html ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù…:
- WebViewGold
- Website 2 APK Builder
- AndroChef

ðŸ“ž Ù„Ù„Ø¯Ø¹Ù…: Ø¹Ù…Ø§Ø¯ Ø¹Ù„ÙŠ
TXT
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù ZIP
        cd dist
        zip -r ../emad-app.zip *
        
        echo "âœ… ØªÙ… Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­!"
        echo "ðŸ“ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù†Ø§ØªØ¬: emad-app.zip"
    
    - name: ðŸ“¤ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù†Ø§ØªØ¬
      uses: actions/upload-artifact@v3
      with:
        name: emad-android-app
        path: emad-app.zip
    
    - name: ðŸŽ‰ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¬Ø§Ø­
      run: |
        echo "ðŸŽŠ BUILD SUCCESS!"
        echo "ðŸ“± ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ù† ØªØ¨ÙˆÙŠØ¨ Artifacts"
        echo "â±ï¸ Ø§Ù„ÙˆÙ‚Øª: $(date)"
